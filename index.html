<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa</title>
</head>

<body>
    <div class="Content">

    <h1>Secret Santa YTLGDK 2020</h1>
    <p>Hej venner, vælg jeres navn i menuen under for at få tildelt en nisse</p>
    <p>som i så skal sende en lil bit gave til :) </p>

    <select name="dropdown" id="menu">
        <option value="Lasse">Lasse</option>
        <option value="Bef">Bef</option>
        <option value="Albert">Albert</option>
        <option value="MB">MB</option>
        <option value="Dencklez">Dencklez</option>
        <option value="Yung">Yung</option>
        <option value="Phil">Phil</option>
        <option value="Adrian">Adrian</option>
    </select>
    <button type="button" id="button1">Få tildelt nisse</button>
    <p id="nissesubject">Ham du skal give gave er: </p> 

    </div>
</body>
    <script>
        let selected = document.getElementById("menu");
        let button = document.getElementById("button1");
        let para = document.getElementById('nissesubject');
            
            button.onclick = async function(){

                let name = selected.value;
                let obj = {name: name};
                let myJSON = JSON.stringify(obj);

                console.log(name);
                console.log(myJSON);

                let fetchK = await fetch('http://localhost:3000/submit', { 
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json',},
                    body: myJSON,
                })
                .then(res => res.json())
                .then(data => para.textContent += data.name);
            };
        
    </script>
</html>